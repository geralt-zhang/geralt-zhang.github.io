---
layout: page
title: ""
permalink: /blob/
phony: true
---

<!-- 根据文件夹结构自动生成标签 -->
<ul id="tag-list">
  {% assign all_tags = "" | split: "," %}
  {% assign all_items = site['blob'] | sort: 'date' %}
  
  <!-- 收集所有文件夹标签 -->
  {% for doc in all_items %}
    {% if doc.phony != true %}
      <!-- 从 URL 中提取文件夹名 /blob/folder/file -> folder -->
      {% assign url_parts = doc.url | split: '/' %}
      {% if url_parts.size >= 4 %}
        {% assign folder = url_parts[2] %}
        {% assign all_tags = all_tags | push: folder %}
      {% endif %}
    {% endif %}
  {% endfor %}
  
  {% assign unique_tags = all_tags | uniq | sort %}
  
  <li class="tag" data-tag="__all__">All blobs{% unless forloop.last %} |{% endunless %}</li>
  
  {% for tag in unique_tags %}
    <li class="tag" data-tag="{{ tag | strip }}">{{ tag | strip }}{% unless forloop.last %} |{% endunless %}</li>
  {% endfor %}
</ul>

<!-- 列表主体 -->
<ul id="lecture-list" class="double-spaced">
  {% assign lectures = site['blob'] | sort: 'date' | reverse %}
  {% for lecture in lectures %}
    {% if lecture.phony != true %}
      <!-- 提取文件夹作为标签 -->
      {% assign url_parts = lecture.url | split: '/' %}
      {% assign folder_tag = url_parts[2] %}
      
      <li data-tags="{{ folder_tag }}">
        <strong>{{ lecture.date | date: '%Y/%m/%d' }}</strong>:
        {% if lecture.ready %}
          <a href="{{ lecture.url }}">{{ lecture.title }}</a>
        {% elsif lecture.noclass %}
          {{ lecture.title }} [no class]
        {% else %}
          {{ lecture.title }} [coming soon]
        {% endif %}
        {% if lecture.details %}
          <span style="float:right">{{ lecture.details }}</span>
        {% endif %}
      </li>
    {% endif %}
  {% endfor %}
</ul>

<script>
// 绑定交互 - 按文件夹过滤
(function() {
  const tags = Array.from(document.querySelectorAll('#tag-list .tag'));
  const items = Array.from(document.querySelectorAll('#lecture-list li'));

  function showAll() {
    items.forEach(i => i.style.display = '');
    tags.forEach(t => t.classList.remove('active'));
    const all = tags.find(t => t.dataset.tag === '__all__');
    if (all) all.classList.add('active');
  }

  // 初始化
  showAll();

  tags.forEach(tagEl => {
    tagEl.addEventListener('click', () => {
      const tag = (tagEl.dataset.tag || '').trim();
      
      if (tag === '__all__') {
        showAll();
        return;
      }

      // 切换 active
      tags.forEach(t => t.classList.remove('active'));
      tagEl.classList.add('active');

      // 按文件夹过滤
      items.forEach(li => {
        const itemTags = (li.dataset.tags || '').trim();
        li.style.display = itemTags === tag ? '' : 'none';
      });
    });
  });
})();
</script>
